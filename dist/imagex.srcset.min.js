!function(t,e,n){"use strict";function i(t,e,n){return v.replace(/\[id]/,t).replace(/\[type]/,e).replace(/\[size]/,n)}function r(t,e){var n=[];if(e=e||"original",p[e])for(var r in p[e])n.push({url:i(t,e,r),width:p.original[r][0]||1/0,height:p.original[r][1]||1/0,dpi:1});return n}function u(t){var e=r(t),n=e.map(function(t){return t.url+" "+t.width+"w"});return n.join(", ")}function o(t){var e=t.getAttribute("data-srcset-id");"IMG"===t.tagName?"srcset"in t?t.setAttribute("srcset",u(e)):c(t,r(e)):l(t,r(e))}function l(t,e){a(t,e)}function a(t,e){var n=h(e);return n&&n.url?void(t.style.backgroundImage="url("+n.url+")"):void console.log("No image found for %o",t)}function c(t,e){return e=e||s(t.getAttribute("srcset")),0===e.length?void console.log("Couldn't parse srcset data for %o",t):void d(t,e)}function d(t,e){var n=h(e);return n&&n.url?void(t.getAttribute("src")!==n.url&&t.setAttribute("src",n.url)):void console.log("No src found for %o",t)}function s(t){var e=/^\d+$/,i=Number.isNaN||function(t){return"number"==typeof t&&isNaN(t)};return t.split(",").map(function(t){var r={url:n,width:1/0,height:1/0,dpi:1};return t.trim().split(/\s+/).forEach(function(t,n){if(0===n)return r.url=t,t;var u=t.substring(0,t.length-1),o=t[t.length-1],l=parseInt(u,10),a=parseFloat(u);"w"===o&&e.test(u)?r.width=l:"h"===o&&e.test(u)?r.height=l:"x"!==o||i(a)?console.log("Invalid srcset descriptor: "+t+"."):r.dpi=a}),r})}function h(n){var i=n.slice(0),r=t.innerWidth||e.documentElement.clientWidth,u=t.innerHeight||e.documentElement.clientHeight,o=t.devicePixelRatio||1,l=function(t){var e,n=i.length,r=i[0];for(e=0;n>e;e+=1)t(i[e],r)&&(r=i[e]);return r},a=function(t){var e,n=i.length;for(e=n-1;e>=0;e-=1)t(i[e])&&i.splice(e,1)};if(0===i.length)return null;var c=l(function(t,e){return t.width>e.width});a(function(t){return t.width<r}),0===i.length&&(i=[c]);var d=l(function(t,e){return t.height>e.height});a(function(t){return t.height<u}),0===i.length&&(i=[d]);var s=l(function(t,e){return t.dpi>e.dpi});a(function(t){return t.dpi<o}),0===i.length&&(i=[s]);var h=l(function(t,e){return t.width<e.width});a(function(t){return t.width>h.width});var m=l(function(t,e){return t.height<e.height});a(function(t){return t.height>m.height});var f=l(function(t,e){return t.dpi<e.dpi});return a(function(t){return t.dpi>f.dpi}),i[0]}function m(t){var n;n=t?Array.isArray(t)?t:[t]:e.querySelectorAll("[data-srcset-id]");for(var i=0;i<n.length;i++)o(n[i])}function f(t,e,n,i){t.addEventListener?t.addEventListener(e,n,i||!1):t.attachEvent&&t.attachEvent("on"+e,n)}function g(t,e){var n,i,r=function(){var u=new Date-i;e>u?n=setTimeout(r,e-u):(n=null,t())};return function(){i=new Date,n||(n=setTimeout(r,e))}}var v="http://d298edkwyoodbw.cloudfront.net/[id]/[type]/[size].jpg",p={horizontal:{thumb:[240,135],thumb2x:[480,270],small:[720,405],medium:[960,540],big:[1200,675],small2x:[1440,810],medium2x:[1920,1080],big2x:[2400,1350]},extra:{thumb:[240,120],thumb2x:[480,240],small:[720,360],medium:[960,480],big:[1200,600],small2x:[1440,720],medium2x:[1920,960],big2x:[2400,1200]},square:{thumb:[60,60],small:[90,90],thumb2x:[120,120],medium:[150,150],small2x:[180,180],big:[450,450],medium2x:[720,720],big2x:[960,960]},vertical:{thumb:[75,105],thumb2x:[150,210],small:[225,315],medium:[300,420],small2x:[450,630],medium2x:[600,840],big:[750,1050],big2x:[1500,2100]},original:{thumb:[240,0],thumb2x:[480,0],small:[720,0],medium:[960,0],big:[1200,0],small2x:[1440,0],medium2x:[1920,0],big2x:[2400,0]}};f(t,"resize",g(m,50)),t.imagexSrcset=m,"object"==typeof module&&"object"==typeof module.exports?module.exports=m:"function"==typeof define&&define.amd&&define("imagexSrcset",function(){return m})}(window,document);