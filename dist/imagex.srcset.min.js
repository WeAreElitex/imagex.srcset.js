!function(t,e,i){"use strict";function n(t){var i=[];t?1===t.nodeType?i=[t]:t.length&&(i=t):i=e.querySelectorAll("[data-srcset-id]");for(var n=0;n<i.length;n++)new a(i[n])}function r(t,e,i,n){t.addEventListener?t.addEventListener(e,i,n||!1):t.attachEvent&&t.attachEvent("on"+e,i)}function u(t,e){var i,n,r=function(){var u=new Date-n;e>u?i=setTimeout(r,e-u):(i=null,t())};return function(){n=new Date,i||(i=setTimeout(r,e))}}var o=function(){function t(t){this.element=t,this.id=t.getAttribute("data-srcset-id"),this.type=this._getType()}var e="http://d298edkwyoodbw.cloudfront.net/[id]/[type]/[size].jpg",i={horizontal:{thumb:[240,135],thumb2x:[480,270],small:[720,405],medium:[960,540],big:[1200,675],small2x:[1440,810],medium2x:[1920,1080],big2x:[2400,1350]},extra:{thumb:[240,120],thumb2x:[480,240],small:[720,360],medium:[960,480],big:[1200,600],small2x:[1440,720],medium2x:[1920,960],big2x:[2400,1200]},square:{thumb:[60,60],small:[90,90],thumb2x:[120,120],medium:[150,150],small2x:[180,180],big:[450,450],medium2x:[720,720],big2x:[960,960]},vertical:{thumb:[75,105],thumb2x:[150,210],small:[225,315],medium:[300,420],small2x:[450,630],medium2x:[600,840],big:[750,1050],big2x:[1500,2100]},original:{thumb:[240,0],thumb2x:[480,0],small:[720,0],medium:[960,0],big:[1200,0],small2x:[1440,0],medium2x:[1920,0],big2x:[2400,0]}};return t.prototype._getUrl=function(t){var i=this;return e.replace(/\[id]/,i.id).replace(/\[type]/,i.type).replace(/\[size]/,t)},t.prototype._getType=function(){var t,e,n=this,r=n.element.getAttribute("data-srcset-type");if(r){if("auto"===r)return t=new s,e=t.width/t.height,e>1.3?"horizontal":1/e>1.3?"vertical":"square";if(i[r])return r}return"original"},t.prototype.getData=function(){var t=this,e=[];if(i[t.type])for(var n in i[t.type])e.push({url:t._getUrl(n),width:i[t.type][n][0]||1/0,height:i[t.type][n][1]||1/0,dpi:1});return e},t.prototype.getSrcset=function(){var t=this,e=t.getData(),i=e.map(function(t){return t.url+" "+t.width+"w"});return i.join(", ")},t}(),s=function(){function i(){this.width=t.innerWidth||e.documentElement.clientWidth,this.height=t.innerHeight||e.documentElement.clientHeight,this.dpi=t.devicePixelRatio||1}return i}(),a=function(){function t(t){this.element=t,this.srcsetData=new o(t),this.setSrcset()}return t.prototype.setSrcset=function(){var t=this;"IMG"===t.element.tagName?"srcset"in t.element?t.setSrcsetAttr():t.setSrc():t.setBackground()},t.prototype.setSrcsetAttr=function(){var t=this;t.element.setAttribute("srcset",t.srcsetData.getSrcset())},t.prototype.setBackground=function(){var t=this,e=t.getBestCandidate();return e&&e.url?void(t.element.style.backgroundImage="url("+e.url+")"):void console.log("No image found for %o",t.element)},t.prototype.setSrc=function(){var t=this,e=t.getBestCandidate();return e&&e.url?void(t.element.getAttribute("src")!==e.url&&t.element.setAttribute("src",e.url)):void console.log("No image found for %o",t.element)},t.prototype.parseSrcset=function(t){var e=this,n=/^\d+$/,r=Number.isNaN||function(t){return"number"==typeof t&&isNaN(t)};return t=t||e.element.getAttribute("srcset"),t.split(",").map(function(t){var e={url:i,width:1/0,height:1/0,dpi:1};return t.trim().split(/\s+/).forEach(function(t,i){if(0===i)return e.url=t,t;var u=t.substring(0,t.length-1),o=t[t.length-1],s=parseInt(u,10),a=parseFloat(u);"w"===o&&n.test(u)?e.width=s:"h"===o&&n.test(u)?e.height=s:"x"!==o||r(a)?console.log("Invalid srcset descriptor: "+t+"."):e.dpi=a}),e})},t.prototype.getBestCandidate=function(){var t=this,e=t.srcsetData.getData(),i=e.slice(0),n=new s,r=function(t){var e,n=i.length,r=i[0];for(e=0;n>e;e+=1)t(i[e],r)&&(r=i[e]);return r},u=function(t){var e,n=i.length;for(e=n-1;e>=0;e-=1)t(i[e])&&i.splice(e,1)};if(0===i.length)return null;var o=r(function(t,e){return t.width>e.width});u(function(t){return t.width<n.width}),0===i.length&&(i=[o]);var a=r(function(t,e){return t.height>e.height});u(function(t){return t.height<n.height}),0===i.length&&(i=[a]);var c=r(function(t,e){return t.dpi>e.dpi});u(function(t){return t.dpi<n.dpi}),0===i.length&&(i=[c]);var h=r(function(t,e){return t.width<e.width});u(function(t){return t.width>h.width});var l=r(function(t,e){return t.height<e.height});u(function(t){return t.height>l.height});var d=r(function(t,e){return t.dpi<e.dpi});return u(function(t){return t.dpi>d.dpi}),i[0]},t}();r(t,"resize",u(n,50)),t.imagexSrcset=n,"object"==typeof module&&"object"==typeof module.exports?module.exports=n:"function"==typeof define&&define.amd&&define("imagexSrcset",function(){return n})}(window,document);